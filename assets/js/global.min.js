let form=document.querySelector(".validator"),validator={handleSubmit:event=>{event.preventDefault();let submit=!0,inputs=form.querySelectorAll("input");validator.clearErrors(),inputs.forEach(input=>{let check=validator.checkInput(input);check.error&&(submit=!1,validator.showError(input,check))}),submit&&form.submit()},checkInput:input=>{let rules=input.dataset.rules,error={error:!0,message:"",type:"error"};if(rules){rules=rules.split("|");for(let i in rules){let rule=rules[i].split("=");switch(rule[0]){case"required":if(!input.value)return error.message="O campo não pode ser vazio.",error;break;case"minLength":if(input.value.length<rule[1])return error.message=`O campo precisa conter no mínimo ${rule[1]} caracteres`,error.type="warning",error;break;case"email":let regex;if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(input.value.toLowerCase()))return error.message="O e-mail informado não é válido.",error}}}return{error:!1,message:"Formulário validado!",type:"success"}},showError:(input,error)=>{input.style.border="3px solid #F00";let errorEl=document.createElement("div");errorEl.classList.add("error-msg"),errorEl.classList.add(error.type),errorEl.innerHTML=error.message,input.parentElement.insertBefore(errorEl,input.elementSibling)},clearErrors:()=>{let errorEl=document.querySelectorAll(".error-msg"),inputs;form.querySelectorAll("input").forEach(input=>{input.style=""}),errorEl.forEach(el=>{el.remove()})}};form.addEventListener("submit",validator.handleSubmit);